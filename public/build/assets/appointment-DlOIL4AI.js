import{r as p,K as l,$ as w,u as I,S as L,Z as m,J as n,bP as N,L as e,ai as k,U as x,aP as _,W as f,as as C,Y as s,M as S,bT as P,X as T}from"./vue-x-iQoTBr.js";import{_ as V}from"./DoctorLayout-flC7NF2W.js";import{S as b,d as g}from"./vendor-DaxBAlbS.js";import"./axios-B573XCF3.js";import"./ApplicationLogo-w-b1xY1C.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-DGhkVnCP.js";const j={class:"py-5"},$={class:"bg-white dark:bg-gray-800 relative shadow-md sm:rounded-lg"},z={class:"flex flex-col md:flex-row items-center justify-between space-y-3 md:space-y-0 md:space-x-4 p-4"},E={class:"w-full md:w-1/2"},Y={class:"relative w-full"},F={class:"overflow-x-auto"},H={class:"w-full text-sm text-left text-gray-500 dark:text-gray-400"},O={key:0},R={class:"px-4 py-3"},Z={class:"px-4 py-3"},q={class:"text-sm text-gray-600"},J={class:"px-4 py-3"},K={class:"px-4 py-3"},Q=["onClick"],W={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50"},X={class:"bg-white p-6 rounded-lg shadow-lg w-96"},G={class:"flex justify-end space-x-2 mt-4"},ee={key:0},te={class:"flex flex-col md:flex-row justify-between items-start md:items-center space-y-3 md:space-y-0 p-4","aria-label":"Table navigation"},re={class:"text-sm font-normal text-gray-500 dark:text-gray-400"},ae={class:"font-semibold text-gray-900 dark:text-white"},se={class:"font-semibold text-gray-900 dark:text-white"},oe={class:"inline-flex items-stretch -space-x-px"},le=["innerHTML","onClick"],xe={__name:"appointment",props:{bookings:Object,search:String},setup(o){const y=p(!1),i=p(""),c=p(""),h=p(null),M=a=>{h.value=a,i.value=a.admin_status,c.value=a.reply,y.value=!0},v=()=>{y.value=!1},D=(a,t)=>{b.fire({title:"Confirm Changes",text:`Are you sure you want to update the status to '${a}'?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, update it!"}).then(r=>{r.isConfirmed&&g.Inertia.post(route("doctor.updateAppointment",h.value.id),{admin_status:a,reply:t},{onSuccess:()=>{b.fire("Updated!","The booking has been updated.","success"),v()},onError:()=>{b.fire("Error!","Failed to update the booking.","error")}})})},u=p(o.search);function A(){g.Inertia.get(route("doctor.appointment"),{search:u.value},{preserveState:!0})}function U(){u.value===""&&g.Inertia.get(route("doctor.appointment"),{},{preserveState:!0})}function B(a){a&&g.Inertia.get(a,{search:u.value},{preserveState:!0})}return(a,t)=>(n(),l(m,null,[w(I(N),{title:"Doctor Dashboard"}),w(V,null,{default:L(()=>[e("div",j,[t[12]||(t[12]=e("div",{class:"w-full text-sm text-left text-gray-500 dark:text-gray-400 mb-2"}," APPOINTMENTS ",-1)),e("div",$,[e("div",z,[e("div",E,[e("form",{onSubmit:k(A,["prevent"]),class:"flex items-center"},[t[5]||(t[5]=e("label",{for:"simple-search",class:"sr-only"},"Search",-1)),e("div",Y,[t[4]||(t[4]=e("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},[e("svg",{"aria-hidden":"true",class:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"currentColor",viewbox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1)),x(e("input",{type:"text",id:"simple-search",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full pl-10 p-2 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Search",required:"","onUpdate:modelValue":t[0]||(t[0]=r=>u.value=r),onInput:U},null,544),[[_,u.value]])])],32)])]),e("div",F,[e("table",H,[t[9]||(t[9]=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},[e("tr",null,[e("th",{scope:"col",class:"px-4 py-3"}," Patient name "),e("th",{scope:"col",class:"px-4 py-3"},"Schedule"),e("th",{scope:"col",class:"px-4 py-3"},"Status"),e("th",{scope:"col",class:"px-4 py-3"},"Actions")])],-1)),e("tbody",null,[o.bookings.data.length===0?(n(),l("tr",O,t[6]||(t[6]=[e("td",{colspan:"5",class:"text-center text-gray-500"}," Nothing found ",-1)]))):f("",!0),(n(!0),l(m,null,C(o.bookings.data,r=>(n(),l("tr",{key:r.id,class:"border-b dark:border-gray-700"},[e("td",R,s(r.patient_name),1),e("td",Z,[e("span",null,s(new Date(r.start_date).toLocaleDateString()),1),e("span",q,"("+s(new Date(r.start_date).toLocaleDateString("en-US",{weekday:"long"}))+")",1),e("span",null,s(new Date("1970-01-01T"+r.start_time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),1)]),e("td",J,[e("span",{class:S({"bg-green-100 text-green-600 px-2 py-1 rounded-full":r.admin_status==="approved","bg-yellow-100 text-yellow-600 px-2 py-1 rounded-full":r.admin_status==="pending","bg-red-100 text-red-600 px-2 py-1 rounded-full":r.admin_status==="canceled"})},s(r.admin_status.charAt(0).toUpperCase()+r.admin_status.slice(1)),3)]),e("td",K,[e("button",{onClick:d=>M(r),class:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600"}," Send Mail ",8,Q)]),y.value?(n(),l("div",W,[e("div",X,[t[8]||(t[8]=e("h2",{class:"text-xl font-semibold mb-4"},"Confirm Changes",-1)),e("p",null,"Are you sure you want to update the status to '"+s(i.value)+"'?",1),x(e("select",{"onUpdate:modelValue":t[1]||(t[1]=d=>i.value=d),class:"mt-4 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"},t[7]||(t[7]=[e("option",{value:"approved"},"Approve",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"canceled"},"Cancel",-1)]),512),[[P,i.value]]),x(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=d=>c.value=d),rows:"3",class:"mt-4 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Reply with reason"},null,512),[[_,c.value]]),e("div",G,[e("button",{onClick:v,class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Cancel "),e("button",{onClick:t[3]||(t[3]=d=>D(i.value,c.value)),class:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600"}," Yes, update it! ")])])])):f("",!0)]))),128))])]),o.bookings.links.length>1?(n(),l("div",ee,[e("nav",te,[e("span",re,[t[10]||(t[10]=T(" Showing ")),e("span",ae,s(o.bookings.from)+"-"+s(o.bookings.to),1),t[11]||(t[11]=T(" of ")),e("span",se,s(o.bookings.total),1)]),e("ul",oe,[(n(!0),l(m,null,C(o.bookings.links,(r,d)=>(n(),l("li",{key:d},[e("a",{href:"#",class:S(["flex items-center justify-center text-sm py-2 px-3 leading-tight border",r.active?"bg-primary-50 text-primary-600 border-primary-300 hover:bg-primary-100":"text-gray-500 bg-white border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white"]),innerHTML:r.label,onClick:k(de=>B(r.url),["prevent"])},null,10,le)]))),128))])])])):f("",!0)])])])]),_:1})],64))}};export{xe as default};
